(()=>{"use strict";const e=React,t=ReactDOM,n=t=>e.createElement("button",{disabled:t.disabled,onClick:t.onClick},t.label);class o{constructor(e,t=1500,n){this.port=e,this.offset=t,this.position=n}}const l=({sw:{port:t,offset:o,position:l},calibrate:a,setPosition:r})=>{const[s,i]=e.useState(o),c="on"===l?"off":"on",p="on"===l?"Off":"On";return e.createElement("p",null,"Port: ",t,e.createElement("input",{type:"number",value:s,onChange:e=>i(parseInt(e.target.value||"0",10))}),e.createElement(n,{label:"Calibrate",onClick:()=>{a(t,s)}}),e.createElement(n,{disabled:void 0===l,label:p,onClick:()=>{r({port:t,offset:o,position:l},c)}}))},a=e=>fetch("/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>(console.log(e),"Position.ON"===e.statusText?"on":"off")));t.render(e.createElement((()=>{const[t,r]=e.useState([new o(0,1360)]),s=(e,t)=>((e,t)=>a({port:e,calibrate:t}).then((n=>new o(e,t,n))))(e,t).then((e=>r((t=>t.map((t=>t.port===e.port?e:t)))))),i=(e,t)=>((e,t)=>a({port:e.port,position:t}).then((t=>new o(e.port,e.offset,t))))(e,t).then((e=>r((t=>t.map((t=>t.port===e.port?e:t))))));return e.createElement(e.Fragment,null,t.map((t=>e.createElement(l,{key:t.port,sw:t,calibrate:s,setPosition:i}))),e.createElement(n,{label:"Add Switch",onClick:()=>r((e=>[...e,new o(t.length)]))}),e.createElement("p",null,"Hello World!"))}),null),document.getElementById("app"))})();
//# sourceMappingURL=app.js.map